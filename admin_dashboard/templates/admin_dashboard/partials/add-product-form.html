<form id = "form" class="card" method=""
    enctype="multipart/form-data"
    hx-post="{% url 'add-product-to-list' %}"
    hx-trigger="submit"
    hx-target=".customers-table"
    hx-swap="innerHTML transition:true"
    >
    <div class="form-grid">
    <div class="form__group">
        <!-------   PRODUCT NAME    ------->
        <label class="form__label" for="name">Product name</label>
        <input 
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors-name"
        hx-swap="outerHTML"
        required

        {% if product_name %}
            value="{{product_name}}"
        {% endif %}

        id="product_name" placeholder="enter product name" name="product_name" class="form__control" type="text" >
        <small style="color: red;" class="product-errors-name">
        </small>        
    </div>
    
    <!-------   PRODUCT CATEGORY   ------->
    <div class="form__group">
        <label class="form__label" for="category">Category</label>
        <select 
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors"
        hx-swap="outerHTML"
        required
        id="category" class="form__control" name="category_name">
        <option value="">Select Category </option>
        {% for category in categories %}
            <option value="{{category.slug}}" 

            {% if category_name %}
                {%  if category_name == category.name %} selected {% endif %}
            {% endif %}

             > {{category.name}}</option>

        {% endfor %}
        </select>
        <small style="color: red;" class="product-errors-category">
        </small>
    </div>

    <!-------   PRODUCT TAG   ------->
    <div class="form__group">
        <label class="form__label" for="tags">Tags</label>
        <input 
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors-tag"
        hx-swap="outerHTML"
        required
        name="tag_name" placeholder="enter tags" id="tags" class="form__control" type="text" 
            {% if tag_name %} 
            value="{{tag_name}}"
            {% endif %}
        >
        <small style="color: red;" class="product-errors-tag">
        </small>
    </div>

    <!-------   PRODUCT IS-DIGITAL   ------->
    <div class="form__group" style="display:flex; gap: var(--space-sm); align-items:center;">
        <input name="is_digital" id="is_digital" 
        type="checkbox" 

        {% if is_digital %}
            {% if is_digital == "on" %}
                checked
            {% endif %}
        {% endif %}

        >
        <label for="is_digital">Is digital(wont' be shipped)</label>
    </div>
    
    </div>
    
    <!-------   PRODUCT QUANTITY   ------->
    <div class="form-grid">
    <div class="form__group">
        <label class="form__label" for="quantity">Quantity</label>
        <input
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors-quantity"
        hx-swap="outerHTML"   
        required       
        name="quantity" placeholder="enter product quantity" id="quantity" class="form__control" type="text" pattern="[0-9]+" 
        {% if quantity %}
            value="{{quantity}}" 
        {% endif %}
        >
        <small style="color: red;" class="product-errors-quantity">
        </small>        
    </div>

    <!-------   PRODUCT SIZE   ------->
    <div class="form__group">
        <label class="form__label" for="size">Size</label>
        <input 
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors-size"
        hx-swap="outerHTML"  
        required       
        name="size" id="size" placeholder="enter product size" class="form__control" type="text" 
        {% if size %}
            value="{{size}}"
        {% endif %}
        >
        <small style="color: red;" class="product-errors-size">
        </small>
    </div>

    <!-------   PRODUCT COLOR   ------->
    <div class="form__group">
        <label class="form__label" for="colors">Colors</label>
        <input
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors-color"
        hx-swap="outerHTML"
        required
        name="color" placeholder="enter product color" id="colors" class="form__control" type="text" 
        
        {% if color %}
            value="{{color}}"
        {% endif %}
        >
        <small style="color: red;" class="product-errors-color">
        </small>
    </div>

    <!-------   PRODUCT PRICE  ------->
    <div class="form__group">
        <label class="form__label" for="price">Price</label>
        <input
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors-price"
        hx-swap="outerHTML"
        required
        name="price" placeholder="enter product price" id="price" class="form__control" type="text" 
        
        {% if price %}
            value="{{price}}"
        {% endif %}
        >
        <small style="color: red;" class="product-errors-price">
        </small>
    </div>
    </div>

    <!-------   PRODUCT IMAGE   ------->
    <div class="form-grid">
    <div class="form__group" >
        <label class="form__label" for="image-file">Upload image</label>

        <input 
        hx-post="{% url 'validate-product-error' %}"
        hx-trigger="change"
        hx-target=".product-errors-image"
        hx-encoding="multipart/form-data"
        hx-swap="outerHTML"
        {% if is_create_view %}required {% endif %}
        name="product_image"  id="image-file" class="form__control" type="file">
        <small style="color: red;" class="product-errors-image">
        </small>

    </div>

    <!-------   PRODUCT DESCRIPTION    ------->
    <div class="form__group" margin-top: var(--space-lg);">
        <label class="form__label" for="description">Description</label>
        <textarea
        hx-get="{% url 'validate-product-error' %}"
        hx-trigger="keyup changed delay:300ms"
        hx-target=".product-errors-description"
        hx-swap="outerHTML"
        required
        name="description"
        placeholder="enter product description" 
        id="description" 
        class="form__control textarea">{{description}}</textarea>
        <small style="color: red;" class="product-errors-description">
        </small>          </div>
    </div>

    <div class="profile__actions" style="justify-content:flex-end;">
        {% if image_url %}
            <div class="current-image-preview">
                <a href="{{image_url}}">Current image</a>
                <p class="form__hint">Leave this field empty to keep the current image.</p>
            </div>
        {% endif %}

    <button
        id="add-btn-1"
        style=" transform:scale(1.1); transition: all .5s ease;"
        {% if is_create_view %}
            class="btn" 
        {% else %}
            class="btn is_create_view"
        {% endif %}
        type="submit"

        >Add to list</button>
    <!-- <a class="btn btn--ghost" href="{% url 'admin-products' %}">Cancel</a> -->
    </div>

</form>

{% if not is_create_view %}
    <td 
    style="display:flex; gap: var(--space-sm); align-items:center;" 
    id="edit-delete-{{product_id}}"
    hx-swap-oob="true"
    >
        <button
        hx-get="{% url 'edit-post-single' product_id %}"
        hx-target="#form"
        hx-swap="outerHTML show:window:top transition:true"
        hx-push-url="true"
        class="btn"  style="background-color:#0d3b66" type="button">Edit</button>   
    </td>
{% endif %}